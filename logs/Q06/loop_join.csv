StmtText,StmtId,NodeId,Parent,PhysicalOp,LogicalOp,Argument,DefinedValues,EstimateRows,EstimateIO,EstimateCPU,AvgRowSize,TotalSubtreeCost,OutputList,Warnings,Type,Parallel,EstimateExecutions
"-- Nested Loops Join
SELECT
    p.performance_id,
    AVG(
        (r.interpretation_score + r.sound_lighting_score + r.stage_presence_score + r.organization_score) / 4.0
    ) AS avg_rating_by_visitor
FROM Ticket t
JOIN Event e ON t.event_id = e.event_id
JOIN Performance p ON p.event_id = e.event_id
LEFT JOIN Rating r ON r.performance_id = p.performance_id AND r.visitor_id = t.visitor_id
WHERE t.visitor_id = 1
GROUP BY p.performance_id
OPTION (LOOP JOIN);",1,1,0,NULL,NULL,1,NULL,"4,060606",NULL,NULL,NULL,"0,028103122",NULL,NULL,SELECT,0,NULL
"  |--Compute Scalar(DEFINE:([Expr1004]=CASE WHEN [Expr1006]=(0) THEN NULL ELSE [Expr1007]/CONVERT_IMPLICIT(numeric(19,0),[Expr1006],0) END))",1,2,1,Compute Scalar,Compute Scalar,"DEFINE:([Expr1004]=CASE WHEN [Expr1006]=(0) THEN NULL ELSE [Expr1007]/CONVERT_IMPLICIT(numeric(19,0),[Expr1006],0) END)","[Expr1004]=CASE WHEN [Expr1006]=(0) THEN NULL ELSE [Expr1007]/CONVERT_IMPLICIT(numeric(19,0),[Expr1006],0) END","4,060606",0,0,28,"0,028103122","[p].[performance_id], [Expr1004]",NULL,PLAN_ROW,0,1
"       |--Stream Aggregate(GROUP BY:([p].[performance_id]) DEFINE:([Expr1006]=COUNT_BIG([Expr1005]), [Expr1007]=SUM([Expr1005])))",1,3,2,Stream Aggregate,Aggregate,GROUP BY:([p].[performance_id]),"[Expr1006]=COUNT_BIG([Expr1005]), [Expr1007]=SUM([Expr1005])","4,060606",0,"6,0963637E-05",28,"0,028103122","[p].[performance_id], [Expr1006], [Expr1007]",NULL,PLAN_ROW,0,1
"            |--Compute Scalar(DEFINE:([Expr1005]=CONVERT_IMPLICIT(numeric(10,0),[DbNtua2025v2].[dbo].[Rating].[interpretation_score] as [r].[interpretation_score]+[DbNtua2025v2].[dbo].[Rating].[sound_lighting_score] as [r].[sound_lighting_score]+[DbNtua2025v2].[dbo].[Rating].[stage_presence_score] as [r].[stage_presence_score]+[DbNtua2025v2].[dbo].[Rating].[organization_score] as [r].[organization_score],0)/(4.0)))",1,4,3,Compute Scalar,Compute Scalar,"DEFINE:([Expr1005]=CONVERT_IMPLICIT(numeric(10,0),[DbNtua2025v2].[dbo].[Rating].[interpretation_score] as [r].[interpretation_score]+[DbNtua2025v2].[dbo].[Rating].[sound_lighting_score] as [r].[sound_lighting_score]+[DbNtua2025v2].[dbo].[Rating].[stage_presence_score] as [r].[stage_presence_score]+[DbNtua2025v2].[dbo].[Rating].[organization_score] as [r].[organization_score],0)/(4.0))","[Expr1005]=CONVERT_IMPLICIT(numeric(10,0),[DbNtua2025v2].[dbo].[Rating].[interpretation_score] as [r].[interpretation_score]+[DbNtua2025v2].[dbo].[Rating].[sound_lighting_score] as [r].[sound_lighting_score]+[DbNtua2025v2].[dbo].[Rating].[stage_presence_score] as [r].[stage_presence_score]+[DbNtua2025v2].[dbo].[Rating].[organization_score] as [r].[organization_score],0)/(4.0)","98,22222",0,"9,822223E-06",20,"0,028042158","[p].[performance_id], [Expr1005]",NULL,PLAN_ROW,0,1
"                 |--Nested Loops(Left Outer Join, WHERE:([DbNtua2025v2].[dbo].[Rating].[performance_id] as [r].[performance_id]=[DbNtua2025v2].[dbo].[Performance].[performance_id] as [p].[performance_id]))",1,5,4,Nested Loops,Left Outer Join,WHERE:([DbNtua2025v2].[dbo].[Rating].[performance_id] as [r].[performance_id]=[DbNtua2025v2].[dbo].[Performance].[performance_id] as [p].[performance_id]),NULL,"98,22222",0,"0,000418",27,"0,028032336","[p].[performance_id], [r].[interpretation_score], [r].[sound_lighting_score], [r].[stage_presence_score], [r].[organization_score]",NULL,PLAN_ROW,0,1
"                      |--Nested Loops(Inner Join, OUTER REFERENCES:([t].[event_id]))",1,6,5,Nested Loops,Inner Join,OUTER REFERENCES:([t].[event_id]),NULL,100,0,"0,000418",11,"0,008630835",[p].[performance_id],NULL,PLAN_ROW,0,1
"                      |    |--Index Scan(OBJECT:([DbNtua2025v2].[dbo].[Ticket].[unique_ticket_per_visitor_event] AS [t]),  WHERE:([DbNtua2025v2].[dbo].[Ticket].[visitor_id] as [t].[visitor_id]=(1)))",1,7,6,Index Scan,Index Scan,"OBJECT:([DbNtua2025v2].[dbo].[Ticket].[unique_ticket_per_visitor_event] AS [t]),  WHERE:([DbNtua2025v2].[dbo].[Ticket].[visitor_id] as [t].[visitor_id]=(1))",[t].[event_id],"4,060606","0,0038657407","0,0003781",15,"0,004243841",[t].[event_id],NULL,PLAN_ROW,0,1
"                      |    |--Index Seek(OBJECT:([DbNtua2025v2].[dbo].[Performance].[idx_performance_event_id] AS [p]), SEEK:([p].[event_id]=[DbNtua2025v2].[dbo].[Ticket].[event_id] as [t].[event_id]) ORDERED FORWARD)",1,8,6,Index Seek,Index Seek,"OBJECT:([DbNtua2025v2].[dbo].[Performance].[idx_performance_event_id] AS [p]), SEEK:([p].[event_id]=[DbNtua2025v2].[dbo].[Ticket].[event_id] as [t].[event_id]) ORDERED FORWARD",[p].[performance_id],"24,626865","0,003125","0,00018408956",11,"0,0038725152",[p].[performance_id],NULL,PLAN_ROW,0,"4,060606"
"                      |--Clustered Index Scan(OBJECT:([DbNtua2025v2].[dbo].[Rating].[PK__Rating__D35B278BED352814] AS [r]), WHERE:([DbNtua2025v2].[dbo].[Rating].[visitor_id] as [r].[visitor_id]=(1)))",1,9,5,Clustered Index Scan,Clustered Index Scan,"OBJECT:([DbNtua2025v2].[dbo].[Rating].[PK__Rating__D35B278BED352814] AS [r]), WHERE:([DbNtua2025v2].[dbo].[Rating].[visitor_id] as [r].[visitor_id]=(1))","[r].[performance_id], [r].[interpretation_score], [r].[sound_lighting_score], [r].[stage_presence_score], [r].[organization_score]",1,"0,0032035","0,0001335",31,"0,0165535","[r].[performance_id], [r].[interpretation_score], [r].[sound_lighting_score], [r].[stage_presence_score], [r].[organization_score]",NULL,PLAN_ROW,0,100
